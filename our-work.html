<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Our Work - Aqualogica</title>
  <link rel="stylesheet" href="our-work.css" />
  <link rel="stylesheet" href="header.css">
  <link rel="stylesheet" href="footer.css">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,500&family=Manrope:wght@300;600&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

  <header class="site-header">
    <nav class="main-nav">
        <!-- Logo (No changes here) -->
        <div class="logo">
            <a href="index.html">
                <img class="logo-default" src="assets/Group.svg" alt="The Social Mafia Logo">
                <img class="logo-hover" src="assets/TSM Full logo.svg" alt="The Social Mafia Logo">
            </a>
        </div>

        <!-- ========================================================== -->
        <!-- START: THIS IS THE CRUCIAL CHANGE -->
        <!-- We wrap the desktop links and button in a single div -->
        <div class="nav-group-right">
            <ul class="nav-links">
                <li><a href="our-work.html">Our work</a></li>
                <li><a href="about-us.html">About us</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <!-- The button is now INSIDE the wrapper -->
            <a href="contact.html" class="btn-primary">Get in touch</a>
        </div>
        <!-- END: THIS IS THE CRUCIAL CHANGE -->
        <!-- ========================================================== -->

        <!-- Mobile Menu "Hamburger" Toggle Button (No changes here) -->
        <button class="mobile-menu-toggle" aria-label="Open navigation menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </nav>
    
    <!-- Full-Screen Mobile Navigation Menu (No changes here) -->
    <div class="mobile-nav-menu">
        <a href="our-work.html">Our work</a>
        <a href="about-us.html">About us</a>
        <a href="contact.html">Contact</a>
    </div>
</header>

  <main class="main-content">
    <img class="client-logo" src="./assets/aqua-bg.png" alt="Aqualogica" />
    <h1 class="heading-1">Our work</h1>
    <p class="subheading">
      Every post, every campaign, every creator is aligned to help your brand grow and engage meaningfully.
    </p>
    <img class="gradient-blur" src="assets/Vector 59.svg" alt="Decorative color gradient" />


    <div class="showcase-container">
        <div class="space"></div>
      <p class="description-text">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
      </p>
    </div>
  </main>

   <div class="stats-container">
    <!-- NEW: Added data-value attribute -->
    <div class="stat-box">
        <p class="stat-value" data-value="3.5">0M Views</p>
    </div>
    <div class="stat-box">
        <p class="stat-value" data-value="1">0M Engagements</p>
    </div>
    <div class="stat-box">
        <p class="stat-value" data-value="1">0M Likes</p>
    </div>
</div>

<section class="brief-section">
    <h2 class="heading-1">Brief</h2>
    <p class="description-text brief-paragraph">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>

    <div class="image-grid-container">
            <section class="carousel-section">
                
                <div class="carousel-container">
                    <div class="carousel-wrapper">
                        <!-- 
                        These slides are a fallback for non-JS users. 
                        JavaScript will rebuild this with clones for the infinite loop. 
                        -->
                        <div class="carousel-slide">
                            <img src="assets/phone.png" alt="Full view of a smartphone showing an Instagram Reel with a shrimp salad.">
                        </div>
                        <div class="carousel-slide">
                            <img src="assets/phone.png" alt="Cropped view of the top of the smartphone screen.">
                        </div>
                        <div class="carousel-slide">
                            <img src="assets/phone.png" alt="Slightly different cropped view of the top of the smartphone screen.">
                        </div>
                        <div class="carousel-slide">
                            <img src="assets/phone.png" alt="Cropped view of the bottom of the smartphone screen.">
                        </div>
                        <div class="carousel-slide">
                            <img src="assets/phone.png" alt="Slightly different cropped view of the bottom of the smartphone screen.">
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <button class="carousel-button prev" aria-label="Previous Slide">❮</button>
                    <button class="carousel-button next" aria-label="Next Slide">❯</button>
                </div>
            </section>
    </div>
</section>

<section class="more-work-section">
    <h2 class="heading-1">More work</h2>
    
    <div class="work-gallery">
        <!-- Card 1 -->
        <a href="#" class="work-item">
            <!-- NEW: This wrapper handles the rounded corners and image zoom -->
            <div class="work-item-image-wrapper">
                <img src="assets/sample-1.png" alt="Aqualogica sunscreen product shot" class="work-item-image">
            </div>
            <p class="work-item-caption">Aqualogica</p>
        </a>
        
        <!-- Card 2 -->
        <a href="#" class="work-item">
            <!-- NEW: This wrapper handles the rounded corners and image zoom -->
            <div class="work-item-image-wrapper">
                <img src="assets/sample-2.png" alt="The Souled Store Pink Panther t-shirt" class="work-item-image">
            </div>
            <p class="work-item-caption">The Souled Store</p>
        </a>
    </div>
</section>

<div class="foot-wrapper">
    <div class="footer-blob left-blob"></div>
    <div class="footer-blob right-blob"></div>

    <footer class="footer-section">
        <!-- Column 1: FAQ -->
        <div class="faq-column">
            <h2>FAQ</h2>
            <div class="faq-list">

                <div class="faq-item">
                    <div class="faq-question">
                        <p>Do I need a marketing team to work with you?</p>
                        <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Not at all! We are designed to be your marketing team. We work with businesses of all sizes, from solo entrepreneurs to companies with established marketing departments looking for extra support.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <p>What kind of results can I expect?</p>
                        <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Results vary based on your industry, budget, and starting point. However, we focus on key performance indicators (KPIs) like increased website traffic, higher conversion rates, and a better return on investment (ROI) for your marketing spend.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <p>How long does it take to see results?</p>
                        <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Some strategies, like PPC advertising, can show results within days. Others, like SEO and content marketing, are long-term strategies that typically show significant results in 3-6 months.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <p>How do you measure success?</p>
                        <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>We measure success using data. We provide regular, easy-to-understand reports that track progress towards the goals we set together at the beginning of our partnership.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        <p>How long does it take to see results?</p>
                        <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Some strategies, like PPC advertising, can show results within days. Others, like SEO and content marketing, are long-term strategies that typically show significant results in 3-6 months.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Column 2: Let's Collaborate -->
        <div class="links-column">
            <h2>Let's collaborate</h2>
            <p class="contact-heading">Contact</p>
            <div class="contact-info">
                <p>+91 8956735402, +91 8485035101</p>
                <p>thesocialmafia@yahoo.com, thesocialmafia17@gmail.com</p>
                <p>A-7 Vishnu Vihar Bibwewadi, Pune - 411037</p>
            </div>
            <div class="main-links">
                <a href="#">Home</a>
                <a href="#">Services</a>
                <a href="#">Blogs</a>
                <a href="#">Careers</a>
                <a href="#">About us</a>
            </div>
            <div class="socials">
                <h3>Social media</h3>
                <div class="social-icons">
                    <a href="#"><img src="assets/Group 9053.png" alt="Instagram"></a>
                    <a href="#"><img src="assets/Group 9054.png" alt="Facebook"></a>
                    <a href="#"><img src="assets/Group 9055.png" alt="LinkedIn"></a>
                </div>
            </div>
        </div>

        <!-- Column 3: Advertisement Card -->
        <div class="ad-column">
            <div class="ad-card">
                <div class="ad-image-container">
                    <img src="assets/Group 9047.png" alt="Stylish Comet brand sneakers">
                </div>
                <div class="ad-text">
                    <h3>Step up. Stand out.<br>Comet style.</h3>
                    <a href="#" class="shop-now-btn">shop now</a>
                </div>
                <div class="instagram-handle">
                    <img src="assets/insta.png" class="insta-image" alt="instagram icon"> <span>@whatever</span>
                </div>
            </div>
        </div>
    </footer>
</div>

<!-- ADDED: JavaScript for mobile menu functionality -->
<script>

// Accordion Style JavaScript
document.addEventListener('DOMContentLoaded', () => {
    const faqItems = document.querySelectorAll('.faq-item');

    faqItems.forEach(itemToOpen => {
        const question = itemToOpen.querySelector('.faq-question');

        question.addEventListener('click', () => {
            // Check if the clicked item is already active
            const isAlreadyActive = itemToOpen.classList.contains('active');

            // First, close all other items
            faqItems.forEach(itemToClose => {
                itemToClose.classList.remove('active');
            });

            // If the clicked item was not active, open it
            if (!isAlreadyActive) {
                itemToOpen.classList.add('active');
            }
        });
    });
});

    const menuToggle = document.querySelector('.mobile-menu-toggle');
    const mobileNav = document.querySelector('.mobile-nav-menu');
    const body = document.body;

    menuToggle.addEventListener('click', () => {
        // Toggle the 'open' class on the menu
        mobileNav.style.display = (mobileNav.style.display === 'flex') ? 'none' : 'flex';
        
        // Toggle a class on the body to handle the icon animation and prevent scrolling
        body.classList.toggle('mobile-menu-open');
    });

document.addEventListener('DOMContentLoaded', function () {
    // --- DOM Element Selection ---
    const container = document.querySelector('.carousel-container');
    const wrapper = document.querySelector('.carousel-wrapper');
    let slides = Array.from(document.querySelectorAll('.carousel-slide'));
    const nextButton = document.querySelector('.carousel-button.next');
    const prevButton = document.querySelector('.carousel-button.prev');
    const progressBar = document.querySelector('.progress-bar');
    
    // --- Configuration Constants ---
    const AUTO_PLAY_INTERVAL = 4000; // 4 seconds
    // --- SENSITIVITY FIX: Lower this number for higher sensitivity (e.g., 3-5). Higher number for lower sensitivity (e.g., 15-20).
    const SWIPE_THRESHOLD = 5; // Was 10, now it's more sensitive.
    
    // --- State Variables ---
    let isDragging = false,
        startPos = 0,
        currentTranslate = 0,
        prevTranslate = 0,
        animationID;
    
    let isTransitioning = false;
    let currentIndex = 0;
    let autoPlayTimer;
    let slidesToShow = 3;
    const originalSlidesCount = slides.length;

    function initializeCarousel() {
        updateSlidesToShow();
        setupClones();
        
        slides = Array.from(wrapper.children);
        currentIndex = slidesToShow;
        
        setWrapperPosition(false);
        
        addEventListeners();
        resetAutoPlay();
    }

    function updateSlidesToShow() {
        if (window.innerWidth >= 1024) slidesToShow = 3;
        else if (window.innerWidth >= 768) slidesToShow = 2;
        else slidesToShow = 1;
    }
    
    function setupClones() {
        wrapper.innerHTML = '';
        slides.slice(0, originalSlidesCount).forEach(slide => wrapper.appendChild(slide.cloneNode(true)));
        
        const clonesEnd = slides.slice(originalSlidesCount - slidesToShow).map(slide => slide.cloneNode(true));
        wrapper.prepend(...clonesEnd);

        const clonesStart = slides.slice(0, slidesToShow).map(slide => slide.cloneNode(true));
        wrapper.append(...clonesStart);
    }

    function showNextSlide() { goToSlide(currentIndex + 1); }
    function showPrevSlide() { goToSlide(currentIndex - 1); }
    
    function goToSlide(index) {
        if (isTransitioning) return;
        isTransitioning = true;
        currentIndex = index;
        setWrapperPosition(true);
    }

    function setWrapperPosition(animate = true) {
        wrapper.style.transition = animate ? 'transform 0.5s ease-out' : 'none';
        currentTranslate = -currentIndex * (100 / slidesToShow);
        wrapper.style.transform = `translateX(${currentTranslate}%)`;
    }

    function checkIndex() {
        if (currentIndex >= originalSlidesCount + slidesToShow || currentIndex < slidesToShow) {
            if (currentIndex >= originalSlidesCount + slidesToShow) currentIndex = slidesToShow;
            else currentIndex = originalSlidesCount + slidesToShow - 1;
            setWrapperPosition(false);
        }
    }

    function startAutoPlay() {
        clearInterval(autoPlayTimer);
        autoPlayTimer = setInterval(showNextSlide, AUTO_PLAY_INTERVAL);
        progressBar.style.transition = 'none';
        progressBar.style.width = '0%';
        void progressBar.offsetWidth;
        progressBar.style.transition = `width ${AUTO_PLAY_INTERVAL}ms linear`;
        progressBar.style.width = '100%';
    }
    
    function resetAutoPlay() {
        clearInterval(autoPlayTimer);
        startAutoPlay();
    }
    
    function dragStart(e) {
        if (isTransitioning) return;
        isDragging = true;
        startPos = getPositionX(e);
        prevTranslate = -currentIndex * (100 / slidesToShow);
        animationID = requestAnimationFrame(animation);
        wrapper.style.transition = 'none';
        clearInterval(autoPlayTimer);
    }

    function dragMove(e) {
        if (isDragging) {
            const currentPosition = getPositionX(e);
            const dragDistancePx = currentPosition - startPos;
            const containerWidth = container.offsetWidth;
            const dragPercent = (dragDistancePx / containerWidth) * 100 / slidesToShow;
            currentTranslate = prevTranslate + dragPercent;
        }
    }

    function dragEnd() {
        if (!isDragging) return;
        isDragging = false;
        cancelAnimationFrame(animationID);
        
        const movedByPercent = currentTranslate - prevTranslate;
        
        // --- SENSITIVITY FIX: Using the new constant from the top of the script ---
        if (movedByPercent < -SWIPE_THRESHOLD) {
            showNextSlide();
        } else if (movedByPercent > SWIPE_THRESHOLD) {
            showPrevSlide();
        } else {
            goToSlide(currentIndex);
        }
        
        resetAutoPlay();
    }
    
    function getPositionX(e) { return e.type.includes('mouse') ? e.pageX : e.touches[0].clientX; }
    
    function animation() {
        wrapper.style.transform = `translateX(${currentTranslate}%)`;
        if (isDragging) requestAnimationFrame(animation);
    }

    function addEventListeners() {
        nextButton.addEventListener('click', () => { showNextSlide(); resetAutoPlay(); });
        prevButton.addEventListener('click', () => { showPrevSlide(); resetAutoPlay(); });

        wrapper.addEventListener('mousedown', dragStart);
        wrapper.addEventListener('touchstart', dragStart, { passive: true });
        wrapper.addEventListener('mouseup', dragEnd);
        wrapper.addEventListener('touchend', dragEnd);
        wrapper.addEventListener('mouseleave', dragEnd);
        wrapper.addEventListener('mousemove', dragMove);
        wrapper.addEventListener('touchmove', dragMove, { passive: true });

        container.addEventListener('mouseenter', () => clearInterval(autoPlayTimer));
        container.addEventListener('mouseleave', resetAutoPlay);
        
        wrapper.addEventListener('transitionend', () => {
            isTransitioning = false;
            checkIndex();
        });

        window.addEventListener('resize', debounce(reinitialize, 250));
    }
    
    function reinitialize() {
        clearInterval(autoPlayTimer);
        initializeCarousel();
    }

    function debounce(func, delay) {
        let timeout;
        return function(...args) {
            clearTimeout(timeout);
            timeout = setTimeout(() => func.apply(this, args), delay);
        };
    }

    initializeCarousel();
});

document.addEventListener('DOMContentLoaded', () => {

    /* ====================================================== */
    /* === UNIVERSAL ON-SCROLL FADE-IN ANIMATION (REVISED) == */
    /* ====================================================== */

    // UPDATED: animateCounter now handles decimals from a data-attribute
    const animateCounter = (element) => {
        const target = parseFloat(element.dataset.value);
        const textContent = element.textContent;
        const suffix = textContent.substring(textContent.indexOf(target.toString().slice(-1)) + 1);
        const duration = 2000; // 2 seconds
        let start = null;

        const step = (timestamp) => {
            if (!start) start = timestamp;
            const progress = Math.min((timestamp - start) / duration, 1);
            
            // Animate with one decimal place
            const currentValue = (progress * target).toFixed(1);
            element.textContent = currentValue + suffix;

            if (progress < 1) {
                window.requestAnimationFrame(step);
            } else {
                // Ensure the final value is exact, especially for integers
                element.textContent = target.toString() + suffix;
            }
        };
        window.requestAnimationFrame(step);
    };

    const setupObserver = (elements, isGroup = false) => {
        if (!elements || elements.length === 0) return;
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-revealed'); // Use a generic reveal class
                    
                    // Check if it's a stat-box to trigger the counter
                    if (entry.target.classList.contains('stat-box')) {
                        const numberElement = entry.target.querySelector('.stat-value');
                        if (numberElement && numberElement.dataset.value) {
                            animateCounter(numberElement);
                        }
                    }
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.25, rootMargin: "0px 0px -50px 0px" });

        elements.forEach((element, index) => {
            if (isGroup) {
                // Use the transition on the element itself for the stagger
                element.style.transition = `opacity 0.6s ease ${index * 150}ms, transform 0.6s ease ${index * 150}ms`;
            }
            observer.observe(element);
        });
    };

    // --- Animate Individual Elements (No Stagger) ---
    // (No changes here)

    // --- Animate Groups of Elements (with Stagger) ---
    // ADDED `.stat-box` to this list
    setupObserver(document.querySelectorAll(
        '.callout, .service-card, .work-card, .how-card-wrapper, .blog-card, .testimonial-card, .feature-card, .stat-box, .story-vision-grid .section-tag, .story-vision-grid .text-column p'
    ), true);


    // ... (The rest of your existing script.js code) ...
});

document.addEventListener('DOMContentLoaded', () => {

    /* ====================================================== */
    /* === NEW: INTERACTIVE CAROUSEL CLASS ================ */
    /* ====================================================== */
    class Carousel {
        constructor(element) {
            this.container = element;
            this.wrapper = this.container.querySelector('.carousel-wrapper');
            this.slides = Array.from(this.wrapper.children);
            this.prevButton = this.container.querySelector('.carousel-button.prev');
            this.nextButton = this.container.querySelector('.carousel-button.next');
            this.progressBar = this.container.querySelector('.progress-bar'); // Assumes progress bar is inside container

            this.currentIndex = 0;
            this.isDragging = false;
            this.startPos = 0;
            this.currentTranslate = 0;
            this.prevTranslate = 0;
            this.animationID = 0;
            this.visibleSlides = 3; // Default to 3
            this.realSlidesCount = this.slides.length;

            this.init();
        }

        init() {
            this.updateVisibleSlides();
            this.setupClones();
            this.addEventListeners();
            this.setInitialPosition();
            this.updateProgressBar();
        }

        setupClones() {
            const clonesStart = this.slides.slice(-this.visibleSlides).map(slide => slide.cloneNode(true));
            this.wrapper.prepend(...clonesStart);

            const clonesEnd = this.slides.slice(0, this.visibleSlides).map(slide => slide.cloneNode(true));
            this.wrapper.append(...clonesEnd);

            // Re-select all slides including clones
            this.slides = Array.from(this.wrapper.children);
        }

        addEventListeners() {
            this.nextButton.addEventListener('click', () => this.moveToNext());
            this.prevButton.addEventListener('click', () => this.moveToPrev());

            this.wrapper.addEventListener('mousedown', (e) => this.dragStart(e));
            this.wrapper.addEventListener('touchstart', (e) => this.dragStart(e), { passive: true });
            
            this.wrapper.addEventListener('mouseup', () => this.dragEnd());
            this.wrapper.addEventListener('mouseleave', () => this.dragEnd());
            this.wrapper.addEventListener('touchend', () => this.dragEnd());

            this.wrapper.addEventListener('mousemove', (e) => this.drag(e));
            this.wrapper.addEventListener('touchmove', (e) => this.drag(e), { passive: true });
            
            this.wrapper.addEventListener('transitionend', () => this.checkIndex());

            window.addEventListener('resize', () => this.onResize());
        }
        
        moveToNext() {
            this.currentIndex++;
            this.setSliderPosition();
        }
        
        moveToPrev() {
            this.currentIndex--;
            this.setSliderPosition();
        }
        
        setSliderPosition() {
            this.wrapper.style.transition = 'transform 0.5s cubic-bezier(0.25, 1, 0.5, 1)';
            this.currentTranslate = (this.currentIndex + this.visibleSlides) * -this.getSlideWidth();
            this.wrapper.style.transform = `translateX(${this.currentTranslate}px)`;
            this.updateProgressBar();
        }

        dragStart(e) {
            this.isDragging = true;
            this.startPos = this.getPositionX(e);
            this.wrapper.classList.add('is-dragging');
            this.animationID = requestAnimationFrame(() => this.animation());
        }

        drag(e) {
            if (this.isDragging) {
                const currentPosition = this.getPositionX(e);
                this.currentTranslate = this.prevTranslate + currentPosition - this.startPos;
            }
        }
        
        dragEnd() {
            if (!this.isDragging) return;
            this.isDragging = false;
            cancelAnimationFrame(this.animationID);
            
            const movedBy = this.currentTranslate - this.prevTranslate;
            if (movedBy < -100) this.currentIndex++;
            if (movedBy > 100) this.currentIndex--;
            
            this.wrapper.classList.remove('is-dragging');
            this.setSliderPosition();
        }

        animation() {
            if (this.isDragging) {
                this.wrapper.style.transform = `translateX(${this.currentTranslate}px)`;
                requestAnimationFrame(() => this.animation());
            }
        }

        checkIndex() {
            if (this.currentIndex >= this.realSlidesCount) {
                this.currentIndex = 0;
            } else if (this.currentIndex < 0) {
                this.currentIndex = this.realSlidesCount - 1;
            } else {
                return;
            }
            this.wrapper.style.transition = 'none';
            this.currentTranslate = (this.currentIndex + this.visibleSlides) * -this.getSlideWidth();
            this.wrapper.style.transform = `translateX(${this.currentTranslate}px)`;
            this.prevTranslate = this.currentTranslate;
        }

        updateProgressBar() {
            const progress = ((this.currentIndex + 1) / this.realSlidesCount) * 100;
            if(this.progressBar) {
                this.progressBar.style.width = `${progress}%`;
            }
        }

        onResize() {
            this.updateVisibleSlides();
            this.setInitialPosition();
        }
        
        setInitialPosition() {
            this.wrapper.style.transition = 'none';
            this.currentTranslate = (this.currentIndex + this.visibleSlides) * -this.getSlideWidth();
            this.prevTranslate = this.currentTranslate;
            this.wrapper.style.transform = `translateX(${this.currentTranslate}px)`;
        }
        
        updateVisibleSlides() {
            if (window.innerWidth >= 1024) this.visibleSlides = 3;
            else if (window.innerWidth >= 768) this.visibleSlides = 2;
            else this.visibleSlides = 1;
        }

        getPositionX(e) {
            return e.type.includes('mouse') ? e.pageX : e.touches[0].clientX;
        }
        getSlideWidth() {
            return this.slides[0].offsetWidth;
        }
    }


    /* ====================================================== */
    /* === UNIVERSAL ON-SCROLL FADE-IN ANIMATION ========== */
    /* ====================================================== */
    const setupObserver = (elements, isGroup = false) => {
        if (!elements || elements.length === 0) return;
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-revealed');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1, rootMargin: "0px 0px -50px 0px" });

        elements.forEach((element, index) => {
            if (isGroup) {
                element.style.transition = `opacity 0.6s ease ${index * 150}ms, transform 0.6s ease ${index * 150}ms`;
            }
            observer.observe(element);
        });
    };

    // --- Add brief section elements to the observer ---
    setupObserver(document.querySelectorAll('.brief-section .heading-1, .brief-section .brief-paragraph, .carousel-container'), true);


    /* ====================================================== */
    /* === INITIALIZE THE CAROUSEL ========================== */
    /* ====================================================== */
    const carouselElement = document.querySelector('.carousel-container');
    if (carouselElement) {
        new Carousel(carouselElement);
    }
    
    // ... (The rest of your existing script.js code) ...
});

document.addEventListener('DOMContentLoaded', () => {

    // ... (All your existing setupObserver and other animation functions are here)

    // --- Animate Groups of Elements (with stagger) ---
    setupObserver(document.querySelectorAll(
        '.callout, .service-card, .work-card, .how-card-wrapper, .blog-card, .testimonial-card, .feature-card, .stat-box, .story-vision-grid .section-tag, .story-vision-grid .text-column p, .work-item' // <-- ADDED .work-item HERE
    ), true);


    /* ====================================================== */
    /* === NEW: PARALLAX SCROLL FOR GALLERY IMAGES ======== */
    /* ====================================================== */
    if (window.matchMedia("(min-width: 1025px)").matches) {
        const galleryImages = document.querySelectorAll('.work-item-image');

        const parallaxObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    window.addEventListener('scroll', handleParallaxScroll);
                } else {
                    window.removeEventListener('scroll', handleParallaxScroll);
                }
            });
        }, { threshold: 0 });
        
        galleryImages.forEach(img => parallaxObserver.observe(img.parentElement));

        function handleParallaxScroll() {
            galleryImages.forEach(img => {
                const rect = img.parentElement.getBoundingClientRect();
                const windowHeight = window.innerHeight;
                
                // Check if the element is in the viewport
                if (rect.top < windowHeight && rect.bottom > 0) {
                    // Calculate progress (0 at bottom, 1 at top)
                    const progress = 1 - ((rect.top + rect.height) / (windowHeight + rect.height));
                    
                    // Map progress to a translateY value (e.g., -10% to 10%)
                    const translateY = (progress - 0.5) * 2 * -10; // -10% to 10%
                    
                    // Get current scale to preserve hover zoom
                    const currentTransform = window.getComputedStyle(img).transform;
                    const matrix = new DOMMatrix(currentTransform);
                    const currentScale = matrix.a;
                    
                    img.style.transform = `translateY(${translateY}%) scale(${currentScale})`;
                }
            });
        }
    }
    
    // ... (The rest of your existing script.js code) ...
});
</script>

</body>
</html>